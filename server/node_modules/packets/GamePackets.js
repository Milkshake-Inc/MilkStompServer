var _ = require("lodash");

module.exports.joinedRoomPacket = function joinedRoomPacket(room, player) {
	 return {
		"opcode": "joinedRoom",
		"remotePlayers": _(room.players).map(this.playerCreatePacket),
		"localPlayer": this.playerCreatePacket(player)
	}
};

module.exports.leftRoom = function leftRoom() {
	return {
		"opcode": "leftRoom"
	}
};

module.exports.playerCreatePacket = function playerCreatePacket(player) {
	return {
		"opcode": "create",
		"id": player.id,
		"x": player.x,
		"y": player.y
	}
};

module.exports.playerRemovePacket = function playerRemovePacket(player) {
	return {
		"opcode": "remove",
		"id": player.id
	}
};

module.exports.playerMovePacket = function playerMovePacket(player) {
	return {
		"opcode": "move",
		"id": player.id,
		"x": player.x,
		"y": player.y
	}
};

module.exports.heartbeat = function heartbeat() {
	return {
		"opcode": "heartbeat",
		"timeStamp": Date.now()
	}
};